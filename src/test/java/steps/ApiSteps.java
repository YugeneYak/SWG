package steps;

import com.google.gson.Gson;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonPrimitive;
import cucumber.api.Scenario;
import cucumber.api.java.Before;
import cucumber.api.java.ru.Дано;
import org.json.JSONArray;
import org.json.JSONObject;
import org.junit.Assert;
import org.openqa.selenium.WebDriver;
import utils.Properties;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import static com.codeborne.selenide.Selectors.*;
import static steps.BaseSteps.processException;

public class ApiSteps {
    private static WebDriver driver;
    private static String scenarioName;
    private static String apiName;

    //типы данных обмена с конфигуратором
    private static String apiPropertyFields = "{\"XML_OUT\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выгрузка в XML\"},\"DELIVERY_TIME\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Ожидаем поставку\"},\"zashchita_ot_peregreva\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Защита от перегрева\"},\"rekomenduemaya_lenta\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Рекомендуемая лента\"},\"zashchita_ot_peregruzki\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Защита от перегрузки\"},\"driver_ip\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Степень защиты драйвера, IP\"},\"diodov_na_segment\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кол-во диодов на сегмент, шт\"},\"vihodnoy_signal\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выходной сигнал\"},\"temperature_range\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Рабочая температура, ? С\"},\"vihod\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выход\"},\"ral\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Код цвета RAL\"},\"BLOG_POST_ID\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"ID поста блога для комментариев\"},\"COMBO2_COMPL_IMG\":{\"TYPE\":\"String\",\"VALUE\":\"/upload/iblock/6a2/oc5yd1gqp1hgd337n2ga10qwkkde1p1v.jpg\",\"NAME\":\"Картинка для API комплектующие\"},\"SKLAD_KZ_FREE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Свободное количество на складах Казахстана\"},\"humidity_range\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Влажность, %\"},\"nalichie_sensora\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Наличие сенсора\"},\"CALC_IP\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Степень защиты IP\"},\"POWER_1METR\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Мощность 1м, Вт\"},\"tip_svetilnika\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип светильника\"},\"maksimalnaya_shirina_lenty\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Максимальная ширина ленты\"},\"NOT_FOR_SALE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Нет в продаже\"},\"vote_sum\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Сумма оценок\"},\"cokol\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип цоколя\"},\"tip_drayvera\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип драйвера\"},\"size_section\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размер сегмента (мм)\"},\"TAGS\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Теги\"},\"dlina_volny_nm\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длина волны, нм\"},\"scheme\":{\"NAME\":\"scheme файл\"},\"CALC_BODY_COLOR\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Цвет корпуса\"},\"battery\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Батарея\"},\"SIDEBAR_PRODUCT\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Акция\"},\"output_voltage\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выходное напряжение, В\"},\"harakteristiki_drayvera\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Характеристики драйвера\"},\"primechanie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Примечание\"},\"ispolnenie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Исполнение\"},\"vyh_dia_napryazh_drayvera\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выходной диапазон напряжений драйвера, В\"},\"CALC_LIGHT_DIST\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Светораспределение\"},\"pitanie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Питание\"},\"kachestvo\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Качество\"},\"nalichie_ventilyatora\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Наличие вентилятора\"},\"proizvoditel_svetodioda\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Производитель светодиода\"},\"prepaint_price\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Цена подготовки к покраске\"},\"BLOG_COMMENTS_CNT\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество комментариев\"},\"CASTOM_COLOR\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кастомный цвет\"},\"POWER\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Мощность, Вт\"},\"CALC_COLOR_PAD\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Цвет накладки\"},\"svetovoy_potok_1m_lm\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Световой поток 1м, Лм\"},\"razmer_kristalla\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размер кристалла\"},\"MINIMUM_PRICE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Минимальная цена\"},\"GROUP_LENTA_IMG\":{\"NAME\":\"Изображение для группы лент\"},\"vendor_code_excel\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Артикул Excel\"},\"Vihodnoy_tok_A\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Выходной ток, А\"},\"SKLAD_BLN_FREE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Свободное количество на складах Беларуси\"},\"osobennost\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Особенность\"},\"series\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Серия\"},\"tip_datchika\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип датчика\"},\"KEYWORDS\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Ключевые слова\"},\"date_price\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Последнее сохранение прайса\"},\"rab_dai_set_napryaz_v\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Рабочий даипазон сетевого напряжения, В\"},\"naznachenie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Назначение\"},\"SHORT_NAME\":{\"TYPE\":\"String\",\"VALUE\":\"24°\",\"NAME\":\"Короткое название\"},\"tip_svetoraspredeleniya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип светораспределения\"},\"count_complect\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кол-во в комплекте\"},\"SKLAD_NSK_FREE_COUNT\":{\"TYPE\":\"String\",\"VALUE\":\"0\",\"NAME\":\"Свободное количество на &quot;Новосибирском основном складе&quot;\"},\"COLOR\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Цвет\"},\"ugol_svecheniya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Угол свечения\"},\"tip\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Тип\"},\"FORUM_MESSAGE_CNT\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество комментариев к элементу\"},\"MORE_PHOTO\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Фотографии галереи \"},\"H1_DETAIL\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Уникальное наименование в детальной карточке товара\"},\"istochnik_sveta\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Источник света\"},\"BRAND_REF\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Бренд\"},\"NUMBER_OF_LEDS\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Количество светодиодов\"},\"tip_tovara\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип товара\"},\"kolichestvovo_kanalov\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\" каналов, шт\"},\"Vihodnoy_tok_ma\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выходной ток, мА\"},\"weight\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Вес брутто, кг\"},\"svetilnik_ip\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Степень защиты светильника, IP\"},\"IES\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"IES файл\"},\"CALC_ACCESSORIES\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Доп. аксессуары\"},\"glubina_vstroyki\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Глубина встройки, мм\"},\"WEIGHT_\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Вес, гр.\"},\"PROFILE_LED\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Лента\"},\"tip_matricy\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип матрицы\"},\"tip_svetodioda\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип светодиодов\"},\"PROPORTIONS\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Размеры, мм\"},\"PDF\":{\"NAME\":\"PDF файл\"},\"zavodskoe_naimenovanie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Заводское наименование\"},\"SPECIALOFFER\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Спецпредложение\"},\"maks_mosht_na_1m_vt\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Максимальная мощность ленты, Вт/м\"},\"vigruzka\":{\"TYPE\":\"String\",\"VALUE\":\"стоп опт\",\"NAME\":\"Выгрузка\"},\"dlina_katushki\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длина, мм\"},\"VIEWING_ANGLE\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Угол рассеивания, ?\"},\"file3D\":{\"NAME\":\"3D файл\"},\"PROFILE_TYPE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Профиль\"},\"tip_bloka_pitaniya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип блока питания\"},\"garantiya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Гарантия\"},\"SKLAD_FREE_COUNT\":{\"TYPE\":\"String\",\"VALUE\":\"728\",\"NAME\":\"Свободное количество на &quot;Основном складе&quot;\"},\"DIALUX_IMG\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"dialux\"},\"tip_dimmirovaniya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип диммирования\"},\"compatible_led_ribbon\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Совместимость с лентой\"},\"mounting_type\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Тип монтажа\"},\"material\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Материал\"},\"form\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Форма\"},\"moshchnost_na_modul\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Мощность модуля, Вт\"},\"komplektaciya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Комплектация\"},\"PROFILE_HANGS\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество подвесов\"},\"diod_segment\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кол-во диодов на сегмент\"},\"TITLE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Заголовок окна браузера\"},\"url1_price\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"url1-price\"},\"NO_GET_JSON\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Не отображать в конфигураторе (GET_JSON)\"},\"DIAMETR\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Диаметр, мм\"},\"BUY_RASSROCHKA\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Покупка в рассрочку\"},\"cvet_korpusa\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Цвет корпуса\"},\"CALC_TYPE_MOUNT\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Тип крепления\"},\"size_mounting\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размер для монтажа ленты\"},\"PHOTOS_IN_INTERIOR\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Фотографии в интерьере\"},\"name_excel\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Имя из Excel\"},\"foto_logo\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"foto_logo\"},\"NO_MAYTONI_FEED\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Не выгружать в Maytoni\"},\"model\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Модель\"},\"RRC_PRICE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"РРЦ\"},\"YU\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Видео\"},\"vyhodnoy_tok_drayvera_ma\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выходной ток драйвера, мА\"},\"potreblyaemyy_ot_seti_tok\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Потребляемый от сети ток, А\"},\"META_DESCRIPTION\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Мета-описание\"},\"Shirina_vstroiki\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Ширина встройки, мм\"},\"dimmirovanie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Диммирование\"},\"PROFILE_SIZE_B\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длина Б\"},\"svetovoy_potok_modul\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Световой поток на модуль, Лм\"},\"PROFILE_SIZE_A\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длина А\"},\"razmery_bloka\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размеры блока, мм\"},\"FORUM_TOPIC_ID\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тема форума для комментариев\"},\"Barcode\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Штрихкод\"},\"WDEXCEL_IMPORT_ID\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Сеанс загрузки из Excel\"},\"brutto_dimensions\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размеры брутто, мм\"},\"tok_am\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Ток, А/м\"},\"GOODS\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выгружать на Goods.ru\"},\"NUMBER_OF_LEDS_MODUL\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кол-во светодиодов на модуль, шт\"},\"light_flow\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Световой поток, Лм\"},\"ACTION_PRICE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Акционная цена\"},\"dean_wire\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длина провода, см\"},\"rabochee_napryazhenie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Рабочее напряжение, В\"},\"kratnost_rezki\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кратность резки, мм\"},\"tip_upravleniya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип управления\"},\"sposob_montaj\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Способ монтажа\"},\"LENGTH\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длина, мм\"},\"WIDTH\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Ширина, мм\"},\"time_1C\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Дата изменения наличия из 1С\"},\"dia_vyhod_napryaz_drayvera\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Диапазон выходных напряжений драйвера, В\"},\"MIN_BEND_R\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Минимальный радиус сгиба\"},\"paint_price_group\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Ценовая группа покраски\"},\"Polost_BP\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Полость под блок питания, мм\"},\"photometric\":{\"NAME\":\"photometric файл\"},\"short_title\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Краткое наименование\"},\"protection_kz\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Защита от КЗ\"},\"proizvoditel_chipa\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Производитель чипа\"},\"SVG_PICTURE\":{\"NAME\":\"SVG картинка\"},\"vote_count\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество проголосовавших\"},\"Svyazi\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Связи\"},\"VIDEO_OBZOR\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Видео обзор (YouTube код)\"},\"montazhnoe_otverstie_w\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Монтажное отверстие ширина, мм\"},\"MANUFACTURER\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Бренд\"},\"EMISSION_COLOR\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Цвет свечения\"},\"paintability\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Возможность покраски\"},\"FEATURES\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Особенности\"},\"stil\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Стиль\"},\"chastota_radiosignala\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Частота радиосигнала, Гц\"},\"CALC_PROVOD\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Комплект проводов\"},\"srok_sluzhby\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Срок службы, ч\"},\"QTY_IN_MASTER_KARTON\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество в мастер-картоне, шт\"},\"montazhnoe_otverstie_h\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Монтажное отверстие высота, мм\"},\"dimensions\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размеры (ДхШхВ), мм\"},\"MAXIMUM_PRICE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Максимальная цена\"},\"XML_ID_TMP\":{\"TYPE\":\"String\",\"VALUE\":\"00-00012032\",\"NAME\":\"Внешний код товара (временное, сохранение старых значений)\"},\"rating\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Рейтинг\"},\"podvijnost\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Подвижность\"},\"CALC_DRIVER\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Драйвер\"},\"Collection_LUX_SVET\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Коллекция\"},\"RECOMMEND\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"С этим товаром рекомендуем\"},\"WEIGHT_MASTER_KARTON\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Вес мастер-картона брутто, кг\"},\"kpd\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"КПД\"},\"max_tok\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Максимальный ток, А\"},\"kolvo_moduley_v_svyazke\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество модулей в связке, шт\"},\"SALELEADER\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Популярное\"},\"max_tok_kanal\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Максимальный ток на канал, А\"},\"razmer_sekcii\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размер секции, мм\"},\"kolichestvo_ryadov\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество рядов\"},\"SIZES_MASTER_KARTON\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размеры мастер-картона, мм\"},\"PWM_frequency\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Частота ШИМ, Гц\"},\"primenenije\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Применение\"},\"tip_lampy\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип лампы\"},\"SKLAD_UZ_FREE\":{\"TYPE\":\"String\",\"VALUE\":\"6\",\"NAME\":\"Свободное количество на складах Узбекистана\"},\"naprjazhenie\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Напряжение, В\"},\"PACKING\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Упаковка\"},\"ARTNUMBER\":{\"TYPE\":\"String\",\"VALUE\":\"012032\",\"NAME\":\"Артикул\"},\"CRI\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"CRI\"},\"nazvanie_lenty\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Название ленты\"},\"razmery_datchika\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размеры датчика, мм\"},\"harakteristika\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Характеристика\"},\"montazhnoe_otverstie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Монтажное отверстие ?, мм\"},\"CODE_MINI\":{\"TYPE\":\"String\",\"VALUE\":\"24S\",\"NAME\":\"Код мини\"},\"code_1c\":{\"TYPE\":\"String\",\"VALUE\":\"00-00012032\",\"NAME\":\"Код 1С\"},\"PROTECTION_LEVEL\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Степень защиты, IP\"},\"lmvt\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Лм/Вт\"},\"tip_lyustry\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип люстры\"},\"LOW_EMISSION\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Цветовая температура, К\"},\"SPACE_MASTER_KARTON\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Объем мастер-картона, м3\"},\"inrush_current\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Пусковой ток, А\"},\"output_current\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Максимальный выходной ток, А\"},\"STUBS\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество заглушек\"},\"add_info\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Дополнительная информация\"},\"razmer_svetodioda\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Размер светодиодов\"},\"kratnost_rezki_led\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кратность резки, LED\"},\"Paintable_parts\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Окрашиваемые детали\"},\"vhodnoe_napryazhenie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Входное напряжение, В\"},\"HEIGHT\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Высота, мм\"},\"zashchita_ot_vhod_napryazh\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Защита от превышения входного напряжения\"},\"CALC_COLOR_TEMP\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Цветовая температура\"},\"PF\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"PF\"},\"tip_dereva\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип дерева\"},\"section1_price\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"section1-price\"},\"vnutrennie_razmery\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Внутренние размеры\"},\"kol_vo_svetodiodov_shtm\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кол-во светодиодов, шт/м\"},\"CURRENT_1METR\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Ток на 1м, А\"},\"OTHER_MODELS\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Другие модели\"},\"category\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Категория товара\"},\"OLD_NAME\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длинное наименование\"},\"kolvo_zon_upravl\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество зон управления, шт\"},\"NEWPRODUCT\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Новинка\"}}";
    static JSONObject apiPropertyFieldsJson = new JSONObject(apiPropertyFields);

//    private static String apiFields = "{\"XML_OUT\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выгрузка в XML\"},\"DELIVERY_TIME\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Ожидаем поставку\"},\"zashchita_ot_peregreva\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Защита от перегрева\"},\"rekomenduemaya_lenta\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Рекомендуемая лента\"},\"zashchita_ot_peregruzki\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Защита от перегрузки\"},\"driver_ip\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Степень защиты драйвера, IP\"},\"diodov_na_segment\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кол-во диодов на сегмент, шт\"},\"vihodnoy_signal\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выходной сигнал\"},\"temperature_range\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Рабочая температура, ? С\"},\"vihod\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выход\"},\"ral\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Код цвета RAL\"},\"BLOG_POST_ID\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"ID поста блога для комментариев\"},\"COMBO2_COMPL_IMG\":{\"TYPE\":\"String\",\"VALUE\":\"/upload/iblock/6a2/oc5yd1gqp1hgd337n2ga10qwkkde1p1v.jpg\",\"NAME\":\"Картинка для API комплектующие\"},\"SKLAD_KZ_FREE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Свободное количество на складах Казахстана\"},\"humidity_range\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Влажность, %\"},\"nalichie_sensora\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Наличие сенсора\"},\"CALC_IP\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Степень защиты IP\"},\"POWER_1METR\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Мощность 1м, Вт\"},\"tip_svetilnika\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип светильника\"},\"maksimalnaya_shirina_lenty\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Максимальная ширина ленты\"},\"NOT_FOR_SALE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Нет в продаже\"},\"vote_sum\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Сумма оценок\"},\"cokol\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип цоколя\"},\"tip_drayvera\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип драйвера\"},\"size_section\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размер сегмента (мм)\"},\"TAGS\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Теги\"},\"dlina_volny_nm\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длина волны, нм\"},\"scheme\":{\"NAME\":\"scheme файл\"},\"CALC_BODY_COLOR\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Цвет корпуса\"},\"battery\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Батарея\"},\"SIDEBAR_PRODUCT\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Акция\"},\"output_voltage\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выходное напряжение, В\"},\"harakteristiki_drayvera\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Характеристики драйвера\"},\"primechanie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Примечание\"},\"ispolnenie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Исполнение\"},\"vyh_dia_napryazh_drayvera\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выходной диапазон напряжений драйвера, В\"},\"CALC_LIGHT_DIST\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Светораспределение\"},\"pitanie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Питание\"},\"kachestvo\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Качество\"},\"nalichie_ventilyatora\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Наличие вентилятора\"},\"proizvoditel_svetodioda\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Производитель светодиода\"},\"prepaint_price\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Цена подготовки к покраске\"},\"BLOG_COMMENTS_CNT\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество комментариев\"},\"CASTOM_COLOR\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кастомный цвет\"},\"POWER\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Мощность, Вт\"},\"CALC_COLOR_PAD\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Цвет накладки\"},\"svetovoy_potok_1m_lm\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Световой поток 1м, Лм\"},\"razmer_kristalla\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размер кристалла\"},\"MINIMUM_PRICE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Минимальная цена\"},\"GROUP_LENTA_IMG\":{\"NAME\":\"Изображение для группы лент\"},\"vendor_code_excel\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Артикул Excel\"},\"Vihodnoy_tok_A\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Выходной ток, А\"},\"SKLAD_BLN_FREE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Свободное количество на складах Беларуси\"},\"osobennost\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Особенность\"},\"series\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Серия\"},\"tip_datchika\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип датчика\"},\"KEYWORDS\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Ключевые слова\"},\"date_price\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Последнее сохранение прайса\"},\"rab_dai_set_napryaz_v\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Рабочий даипазон сетевого напряжения, В\"},\"naznachenie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Назначение\"},\"SHORT_NAME\":{\"TYPE\":\"String\",\"VALUE\":\"24°\",\"NAME\":\"Короткое название\"},\"tip_svetoraspredeleniya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип светораспределения\"},\"count_complect\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кол-во в комплекте\"},\"SKLAD_NSK_FREE_COUNT\":{\"TYPE\":\"String\",\"VALUE\":\"0\",\"NAME\":\"Свободное количество на &quot;Новосибирском основном складе&quot;\"},\"COLOR\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Цвет\"},\"ugol_svecheniya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Угол свечения\"},\"tip\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Тип\"},\"FORUM_MESSAGE_CNT\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество комментариев к элементу\"},\"MORE_PHOTO\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Фотографии галереи \"},\"H1_DETAIL\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Уникальное наименование в детальной карточке товара\"},\"istochnik_sveta\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Источник света\"},\"BRAND_REF\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Бренд\"},\"NUMBER_OF_LEDS\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Количество светодиодов\"},\"tip_tovara\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип товара\"},\"kolichestvovo_kanalov\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\" каналов, шт\"},\"Vihodnoy_tok_ma\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выходной ток, мА\"},\"weight\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Вес брутто, кг\"},\"svetilnik_ip\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Степень защиты светильника, IP\"},\"IES\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"IES файл\"},\"CALC_ACCESSORIES\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Доп. аксессуары\"},\"glubina_vstroyki\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Глубина встройки, мм\"},\"WEIGHT_\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Вес, гр.\"},\"PROFILE_LED\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Лента\"},\"tip_matricy\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип матрицы\"},\"tip_svetodioda\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип светодиодов\"},\"PROPORTIONS\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Размеры, мм\"},\"PDF\":{\"NAME\":\"PDF файл\"},\"zavodskoe_naimenovanie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Заводское наименование\"},\"SPECIALOFFER\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Спецпредложение\"},\"maks_mosht_na_1m_vt\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Максимальная мощность ленты, Вт/м\"},\"vigruzka\":{\"TYPE\":\"String\",\"VALUE\":\"стоп опт\",\"NAME\":\"Выгрузка\"},\"dlina_katushki\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длина, мм\"},\"VIEWING_ANGLE\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Угол рассеивания, ?\"},\"file3D\":{\"NAME\":\"3D файл\"},\"PROFILE_TYPE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Профиль\"},\"tip_bloka_pitaniya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип блока питания\"},\"garantiya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Гарантия\"},\"SKLAD_FREE_COUNT\":{\"TYPE\":\"String\",\"VALUE\":\"728\",\"NAME\":\"Свободное количество на &quot;Основном складе&quot;\"},\"DIALUX_IMG\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"dialux\"},\"tip_dimmirovaniya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип диммирования\"},\"compatible_led_ribbon\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Совместимость с лентой\"},\"mounting_type\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Тип монтажа\"},\"material\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Материал\"},\"form\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Форма\"},\"moshchnost_na_modul\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Мощность модуля, Вт\"},\"komplektaciya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Комплектация\"},\"PROFILE_HANGS\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество подвесов\"},\"diod_segment\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кол-во диодов на сегмент\"},\"TITLE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Заголовок окна браузера\"},\"url1_price\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"url1-price\"},\"NO_GET_JSON\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Не отображать в конфигураторе (GET_JSON)\"},\"DIAMETR\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Диаметр, мм\"},\"BUY_RASSROCHKA\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Покупка в рассрочку\"},\"cvet_korpusa\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Цвет корпуса\"},\"CALC_TYPE_MOUNT\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Тип крепления\"},\"size_mounting\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размер для монтажа ленты\"},\"PHOTOS_IN_INTERIOR\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Фотографии в интерьере\"},\"name_excel\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Имя из Excel\"},\"foto_logo\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"foto_logo\"},\"NO_MAYTONI_FEED\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Не выгружать в Maytoni\"},\"model\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Модель\"},\"RRC_PRICE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"РРЦ\"},\"YU\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Видео\"},\"vyhodnoy_tok_drayvera_ma\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выходной ток драйвера, мА\"},\"potreblyaemyy_ot_seti_tok\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Потребляемый от сети ток, А\"},\"META_DESCRIPTION\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Мета-описание\"},\"Shirina_vstroiki\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Ширина встройки, мм\"},\"dimmirovanie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Диммирование\"},\"PROFILE_SIZE_B\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длина Б\"},\"svetovoy_potok_modul\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Световой поток на модуль, Лм\"},\"PROFILE_SIZE_A\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длина А\"},\"razmery_bloka\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размеры блока, мм\"},\"FORUM_TOPIC_ID\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тема форума для комментариев\"},\"Barcode\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Штрихкод\"},\"WDEXCEL_IMPORT_ID\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Сеанс загрузки из Excel\"},\"brutto_dimensions\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размеры брутто, мм\"},\"tok_am\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Ток, А/м\"},\"GOODS\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Выгружать на Goods.ru\"},\"NUMBER_OF_LEDS_MODUL\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кол-во светодиодов на модуль, шт\"},\"light_flow\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Световой поток, Лм\"},\"ACTION_PRICE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Акционная цена\"},\"dean_wire\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длина провода, см\"},\"rabochee_napryazhenie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Рабочее напряжение, В\"},\"kratnost_rezki\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кратность резки, мм\"},\"tip_upravleniya\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип управления\"},\"sposob_montaj\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Способ монтажа\"},\"LENGTH\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длина, мм\"},\"WIDTH\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Ширина, мм\"},\"time_1C\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Дата изменения наличия из 1С\"},\"dia_vyhod_napryaz_drayvera\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Диапазон выходных напряжений драйвера, В\"},\"MIN_BEND_R\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Минимальный радиус сгиба\"},\"paint_price_group\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Ценовая группа покраски\"},\"Polost_BP\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Полость под блок питания, мм\"},\"photometric\":{\"NAME\":\"photometric файл\"},\"short_title\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Краткое наименование\"},\"protection_kz\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Защита от КЗ\"},\"proizvoditel_chipa\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Производитель чипа\"},\"SVG_PICTURE\":{\"NAME\":\"SVG картинка\"},\"vote_count\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество проголосовавших\"},\"Svyazi\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Связи\"},\"VIDEO_OBZOR\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Видео обзор (YouTube код)\"},\"montazhnoe_otverstie_w\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Монтажное отверстие ширина, мм\"},\"MANUFACTURER\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Бренд\"},\"EMISSION_COLOR\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Цвет свечения\"},\"paintability\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Возможность покраски\"},\"FEATURES\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Особенности\"},\"stil\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Стиль\"},\"chastota_radiosignala\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Частота радиосигнала, Гц\"},\"CALC_PROVOD\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Комплект проводов\"},\"srok_sluzhby\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Срок службы, ч\"},\"QTY_IN_MASTER_KARTON\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество в мастер-картоне, шт\"},\"montazhnoe_otverstie_h\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Монтажное отверстие высота, мм\"},\"dimensions\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размеры (ДхШхВ), мм\"},\"MAXIMUM_PRICE\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Максимальная цена\"},\"XML_ID_TMP\":{\"TYPE\":\"String\",\"VALUE\":\"00-00012032\",\"NAME\":\"Внешний код товара (временное, сохранение старых значений)\"},\"rating\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Рейтинг\"},\"podvijnost\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Подвижность\"},\"CALC_DRIVER\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Драйвер\"},\"Collection_LUX_SVET\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Коллекция\"},\"RECOMMEND\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"С этим товаром рекомендуем\"},\"WEIGHT_MASTER_KARTON\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Вес мастер-картона брутто, кг\"},\"kpd\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"КПД\"},\"max_tok\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Максимальный ток, А\"},\"kolvo_moduley_v_svyazke\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество модулей в связке, шт\"},\"SALELEADER\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Популярное\"},\"max_tok_kanal\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Максимальный ток на канал, А\"},\"razmer_sekcii\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размер секции, мм\"},\"kolichestvo_ryadov\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество рядов\"},\"SIZES_MASTER_KARTON\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размеры мастер-картона, мм\"},\"PWM_frequency\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Частота ШИМ, Гц\"},\"primenenije\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Применение\"},\"tip_lampy\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип лампы\"},\"SKLAD_UZ_FREE\":{\"TYPE\":\"String\",\"VALUE\":\"6\",\"NAME\":\"Свободное количество на складах Узбекистана\"},\"naprjazhenie\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Напряжение, В\"},\"PACKING\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Упаковка\"},\"ARTNUMBER\":{\"TYPE\":\"String\",\"VALUE\":\"012032\",\"NAME\":\"Артикул\"},\"CRI\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"CRI\"},\"nazvanie_lenty\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Название ленты\"},\"razmery_datchika\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Размеры датчика, мм\"},\"harakteristika\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Характеристика\"},\"montazhnoe_otverstie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Монтажное отверстие ?, мм\"},\"CODE_MINI\":{\"TYPE\":\"String\",\"VALUE\":\"24S\",\"NAME\":\"Код мини\"},\"code_1c\":{\"TYPE\":\"String\",\"VALUE\":\"00-00012032\",\"NAME\":\"Код 1С\"},\"PROTECTION_LEVEL\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Степень защиты, IP\"},\"lmvt\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Лм/Вт\"},\"tip_lyustry\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип люстры\"},\"LOW_EMISSION\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Цветовая температура, К\"},\"SPACE_MASTER_KARTON\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Объем мастер-картона, м3\"},\"inrush_current\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Пусковой ток, А\"},\"output_current\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Максимальный выходной ток, А\"},\"STUBS\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество заглушек\"},\"add_info\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Дополнительная информация\"},\"razmer_svetodioda\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Размер светодиодов\"},\"kratnost_rezki_led\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кратность резки, LED\"},\"Paintable_parts\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Окрашиваемые детали\"},\"vhodnoe_napryazhenie\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Входное напряжение, В\"},\"HEIGHT\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Высота, мм\"},\"zashchita_ot_vhod_napryazh\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Защита от превышения входного напряжения\"},\"CALC_COLOR_TEMP\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Цветовая температура\"},\"PF\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"PF\"},\"tip_dereva\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Тип дерева\"},\"section1_price\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"section1-price\"},\"vnutrennie_razmery\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Внутренние размеры\"},\"kol_vo_svetodiodov_shtm\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Кол-во светодиодов, шт/м\"},\"CURRENT_1METR\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Ток на 1м, А\"},\"OTHER_MODELS\":{\"TYPE\":\"String\",\"VALUE\":\"false\",\"NAME\":\"Другие модели\"},\"category\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Категория товара\"},\"OLD_NAME\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Длинное наименование\"},\"kolvo_zon_upravl\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Количество зон управления, шт\"},\"NEWPRODUCT\":{\"TYPE\":\"String\",\"VALUE\":\"\",\"NAME\":\"Новинка\"}}";
//    private static JSONObject apiFieldsJson = new JSONObject(apiFields);

    @Before
    public void setup() {
        // Создание экземпляра класса BaseSteps
        BaseSteps baseSteps = new BaseSteps();
        // Инициализация драйвера
//        baseSteps.setupDriver();
        // Задание значения драйвера
        driver = baseSteps.getDriver();
    }

    @Before
    public void before(Scenario scenario) {
        scenarioName = scenario.getName();
    }

    @Дано("Json")
    public static void json(List<String> menuItems) {

        //для разных структур ответа API
        Map<String, String> conditions = new HashMap<>();

        for (String menuItem : menuItems) {
//            System.out.println("menuItem " + menuItem);
            if (menuItem.contains("swg")) {

//                System.out.println("menuItem " + menuItem);
                conditions.put("url", menuItem);
            } else {
                conditions.put("items", menuItem);
            }
        }

        //данные обмена обмена с конфигуратором
        try {
            driver.get(conditions.get("url"));
        } catch (Exception e) {
            String errorMessage = e.getMessage();
            System.out.println(errorMessage);
            // Вывод полной трассировки стека
            e.printStackTrace();

            processException(scenarioName, Thread.currentThread().getStackTrace()[1].getMethodName(), "ОШИБКА: Не удалось открыть " + conditions.get("url"));
            Assert.fail("Не удалось открыть " + conditions.get("url"));
        }

        String apiJason = driver.findElement(byXpath("//pre")).getText();

        JSONObject object1;

        //для Combo 2
        if (conditions.get("items").equals("combo")) {

            apiName = "Combo 2";
            JSONObject object = new JSONObject(apiJason);  // Преобразование строки в JSONObject

            JSONArray array1 = object.getJSONArray("ITEMS"); // Получает "ITEMS" в виде JSONArray
            object1 = array1.getJSONObject(0);

        } else {
            apiName = "All";
            JSONObject jsonObject = new JSONObject(apiJason);
            JSONObject resultObject = jsonObject.getJSONObject("result");
            JSONArray array1 = resultObject.getJSONArray("PRODUCTS");
            object1 = array1.getJSONObject(0);
        }

        JSONArray objectProps = object1.getJSONArray("PROPERTIES");

//        System.out.println("objectProps " + objectProps);

        // Создаем экземпляр класса Gson
        Gson gson = new Gson();

        String code = "";
        String type = "";
        Boolean value;

// Парсим строку JSON в объект JsonObject
        for (int i = 0; i < objectProps.length(); i++) { //objectProps.length()

            JsonObject jsonObject = gson.fromJson(objectProps.getJSONObject(i).toString(), JsonObject.class);

// Получаем все поля из объекта JsonObject
            for (String key : jsonObject.keySet()) {
                // Получаем значение поля как JsonElement
                JsonElement valueElement = jsonObject.get(key);
                //проверяем требования соответствия типу данных

                if (key.equals("CODE")) {
                    JsonPrimitive valuePrimitive = (JsonPrimitive) valueElement;

                    //код параметра
                    code = valuePrimitive.getAsString();
                }
                if (key.equals("VALUE")) {
                    try {
                        JsonPrimitive valuePrimitive = jsonObject.getAsJsonPrimitive(key);
                        if (valuePrimitive.isString()) {
                            type = "String";

                        } else if (valuePrimitive.isNumber()) {
                            type = "Number";
                        } else if (valuePrimitive.isBoolean()) {
                            type = "Boolean";
                        }
                    } catch (ClassCastException cce) {
                        type = "Array";
                    }
                }

            }
            if (code.equals("code_1c")) {
                // Получаем требования к типу данных по коду свойства
                //текущие требования к типу данных
                JSONObject requiredType = apiPropertyFieldsJson.getJSONObject(code);
                String requiredValue = requiredType.getString("TYPE");

                //костыль для свойства code_1c
                if (!requiredValue.equals(type)) {
                    processException(scenarioName, Thread.currentThread().getStackTrace()[1].getMethodName(), " " + apiName + " ОШИБКА: Товар: " + object1.getString("NAME") + ", свойство: " + code + " тип полученных данных " + type + " не соответствует требованию обмена " + requiredValue);
                    Assert.fail("ОШИБКА: Товар: " + object1.getString("NAME") + ", свойство: " + code + " тип полученных данных " + type + " не соответствует требованию обмена " + requiredValue);
                }
            }
        }
        processException(scenarioName, Thread.currentThread().getStackTrace()[1].getMethodName(), "API " + apiName + " работает");
        Assert.assertTrue("API " + apiName + " работает", true);
    }

}